% This is part of Un soupçon de mathématique sans être agressif pour autant
% Copyright (c) 2012-2013
%   Laurent Claessens
% See the file fdl-1.3.txt for copying conditions.

\chapter{Généralités}

\begin{remark}
    Certains bouts de codes donnés ici commencent par la ligne
    \begin{quote}
        \info{\# -*- coding: utf8 -*-}
    \end{quote}
    Si vous savez ce que signifie «\wikipedia{fr}{Utf8}{utf8}», vous devriez deviner à quoi sert cette ligne. Sinon c'est pas grave : vous n'êtes pas \emph{obligés} de l'écrire dans vos programmes, mais c'est une bonne habitude à prendre. Nous en reparlerons peut-être plus tard.
\end{remark}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{La fonction \info{print}}
%---------------------------------------------------------------------------------------------------------------------------

Python ne prend pas d'initiatives. Si vous ne lui demandez pas d'écrire quelque chose, il n'écrira rien. La commande la plus courante\footnote{Bien entendu, python permet de programmer des fenêtres, des boutons et autres boites de dialogue, auquel cas ce ne sera plus la commande \info{print} qui jouera.} pour afficher quelque chose à l'écran est la commande \info{print}. 
\begin{enumerate}
    \item
        Pour afficher la valeur d'une variable \info{a}, mettre \info{print(a)}.
    \item
        Pour afficher un texte (par exemple «bonjour» ), mettre des guillemets : \info{print(``bonjour'')}.
\end{enumerate}
Si vous voulez afficher plusieurs choses, vous les séparez par une virgule.

\lstinputlisting{ex_print.py}

donne

\lstinputlisting[title=Résultat]{res_ex_print.txt}

Notez que les lignes qui commencent par \# ne sont pas prises en compte. Cela permet au programmeur de mettre des notes pour lui-même. N'hésitez pas à en mettre pour rendre votre code plus lisible.

\Exo{Premiere-0037}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Listes}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Une liste est une collection ordonnée d'éléments. Elle se définit avec des crochets.

\lstinputlisting{ex_listes.py}

donne

\lstinputlisting[title=Résultat]{res_ex_listes.txt}

Nous pouvons ajouter un élément à une liste en utilisant la \emph{méthode} \info{append}, et retrouver un élément d'une liste par son numéro (attention : python numérote à partie de zéro), en demandant par exemple \info{A[4]} pour l'élément numéro \( 4\) de la liste \info{A}. Cela sera donc le cinquième élément de la liste. Cas spécial : le dernier élément de la liste est le numéro \( -1\).

\lstinputlisting{ex_listes2.py}

donne

\lstinputlisting[title=Résultat]{res_ex_listes2.txt}


\Exo{Premiere-0033}


La multiplication d'une liste par un nombre donne la liste contenant plusieurs fois la liste originale. Nous ajoutons une liste à une autre en utilisant la méthode \info{extend}.


\lstinputlisting{ex_listes3.py}

donne

\lstinputlisting[title=Résultat]{res_ex_listes3.txt}


\Exo{Premiere-0034}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Créer des fonctions}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Choses Basiques}
%---------------------------------------------------------------------------------------------------------------------------

Si un calcul doit être refait plusieurs fois dans un même programme, il est bon d'écrire une fonction qui sera appelée à chaque fois. En python, une fonction se déclare avec le mot-clef \info{def} comme ceci :
\begin{quote}
    \info{def\ nom\_de\_ma\_fonction(a,b):}
\end{quote}
où \info{a} et \info{b} seront les arguments de la fonction. Il peut y en avoir un seul, deux, ou plus (pas de limites), ou pas du tout. Une fonction peut afficher et calculer autant de résultats intermédiaires que l'on veut. 

\lstinputlisting{ex_fonction.py}

donne

\lstinputlisting[title=Résultat]{res_ex_fonction.txt}

Cette fonction ne fait qu'afficher du texte, mais ne retourne pas de valeurs. Voici une fonction qui retourne \( 1\) si le nombre donné est plus grand ou égal à zéro et retourne \( -1\) si il est négatif.


\lstinputlisting{ex_fonction2.py}

donne

\lstinputlisting[title=Résultat]{res_ex_fonction2.txt}


\Exo{Premiere-0066}


\Exo{Premiere-0068}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Pour aller plus loin}
%---------------------------------------------------------------------------------------------------------------------------

La fonction de l'exemple précédent peut être simplifiée en sachant que dès que une instruction \info{return} est rencontrée, l'exécution de la fonction est \emph{immédiatement} stoppée et la valeur est retournée. Nous pouvons donc écrire

\lstinputlisting{ex_fonction3.py}

Si le nombre donné est positif, un \info{return} est rencontré à l'intérieur du \info{if}, et l'autre \info{return} n'est jamais rencontré.

D'autre part, une fonction peut vraiment prendre \emph{n'importe quoi} comme argument, y compris des autres fonctions. Dans l'exemple suivant, la fonction \info{evaluation} prend un argument une fonction et un nombre, et retourne la fonction évaluée en ce nombre.

\lstinputlisting{ex_fonction4.py}

donne

\lstinputlisting[title=Résultat]{res_ex_fonction4.txt}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Tester la divisibilité}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Nous aurons de temps en temps besoin de tester si un nombre est divisible par deux, par trois ou par autre chose.

Testez le programme suivant.

\lstinputlisting{ex_division.py}

Est-ce que vous pouvez en déduire un critère de divisibilité basé sur l'usage de la «division entière» \info{\%} ? Regardez combien vaut \info{i\%4} pour les \info{i} qui sont divisible par \( 4\).

\Exo{Premiere-0067}


%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
\section{Tracer une fonction}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

\begin{example}
    Créons un petit programme définissant la fonction \( f(x)=x^2-2\) et en calculant \( 10\) valeurs régulièrement espacées entre \( -5\) et \( 5\). La production d'une liste de nombre régulièrement espacés est un travail pour la fonction \info{numpy.linspace}. La syntaxe en est 
\begin{quote}
    \info{numpy.linspace(a,b,num=n)}
\end{quote}
Cela est une liste de \info{n} nombres régulièrement espacés entre \info{a} et \info{b}. En ce qui concerne le carré, en python les puissances sont données par \info{**}. Par exemple \info{a**3} est le cube de \info{a} :
\begin{verbatim}
>>> 2**3
8
\end{verbatim}
Le programme est

\lstinputlisting{ex_graphe.py}

Le programme donne :

%\lstinputlisting[title=Résultat]{res_ex_graphe.txt}

\VerbatimInput{res_ex_graphe.txt}
    
\end{example}



\chapter{Manipulation de texte}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Manipulation de base}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Pour mettre un texte dans une variable, il suffit de le faire :

\lstinputlisting{ex_texte1.py}
donne
\lstinputlisting[title=Résultat]{res_ex_texte1.txt}

Les chaînes de caractères (par exemple la variable \info{a} de l'exemple) peuvent être utilisées comme des listes. Il est possible d'en demander des parties.

\lstinputlisting{ex_texte2.py}
donne
\lstinputlisting[title=Résultat]{res_ex_texte2.txt}

La longueur d'un texte est donnée par \info{len(a)}.

Nous pouvons un peu automatiser :
\lstinputlisting{ex_texte3.py}
donne
\lstinputlisting[title=Résultat]{res_ex_texte3.txt}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Passer des textes aux listes et inversement}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Si nous avons une suite de lettres, il est possible de la transformer en texte (chaîne de caractères), et inversement. Si \info{texte} est une chaîne de caractères, alors
\begin{quote}
    \info{list(A)}
\end{quote}
est la liste de ses caractères. La conversion dans ce sens est d'un intérêt limité parce que le gros des fonctionnalités des listes sont accessibles aux chaînes de caractères.

La conversion d'une liste en une chaîne est plus intéressante parce qu'elle permet de créer un texte «petit bout par petit bout». La méthode est la suivante. Si \info{A} est une liste alors
\begin{quote}
    \info{``''.join(A)}
\end{quote}
est la chaîne correspondante. Mieux : 
\begin{quote}
    \info{``-''.join(A)}
\end{quote}
est un texte qui «joint» les éléments de \info{A} par des tirets.


\Exo{Premiere-0070}

\lstinputlisting{ex_join1.py}

donne

\lstinputlisting[title=Résultat]{res_ex_join1.txt}


\Exo{Premiere-0051}

Il y a encore mieux. Il faut savoir que la chaîne \info{``\textbackslash n''} représente un saut de ligne. Par conséquent, en reliant les éléments d'une liste par un \info{``\textbackslash n''}, nous pouvons écrire les éléments en colonne. 

\lstinputlisting{ex_join2.py}

donne

\lstinputlisting[title=Résultat]{res_ex_join2.txt}

Et enfin, une dernière conversion consiste à séparer un texte en élément séparés par une chaîne. 

\lstinputlisting{ex_split1.py}

donne

\lstinputlisting[title=Résultat]{res_ex_split1.txt}


\Exo{Premiere-0052}


\chapter{Un texte qui ressemble à du français}

L'analyse de la fréquence des lettres dans un texte permet aussi de détecter la langue. Regardons ces trois textes, classés par ordre croissant de «crédibilité»:

\begin{quote}
    uuerlh i,ie oceieomriosnuu éctes 'qD umixnohpsnaedoteirinmrpouont nqenc a ltvpa n gcudttn  sercacuqe bu'iido retsaiacean sat oc leiu n  eéiteMe e   t  rtlteu rdédndame giaeosmx'raeaeea  jo m uds tum   et uaecetrûauu leel ttoœaxergs m'u aq uea un ileetid 'n utztotee isiranit aar,s evd e emlt zreumaganai nm,tlren id ouna,àadg lvnu s ai ie sut oqtrnœ u'nvtaoiemooe l  dqar meecésnc  jruscuttmse Aaasee ede netps  e riih
\end{quote}
Ce premier texte a été généré en prenant des lettres (y compris les espaces) au hasard dans un texte de référence\footnote{En l'occurence, \emph{Le temps retrouvé}.}. La fréquence des lettres est donc la même (aux aléas statistiques près) que la fréquence en français, mais force est d'avouer que cela ne ressemble pas tellement à du vrai français.
%TODO : mettre un lien vers wikisource pour le temps retrouvé
 
Second extrait :
\begin{quote}
    aiffe ditet ntta t cos rape uelloux sss éstére dile dsiten pen douitese Mmbis é ai quder ndises gau r qul aure à arsois arons à avese durcet l'Ountai vountel'aue i seuneueras e de beucene, la à qutout prmmontuxtri cet, rès ppllall anért me lle nte me s qujascoun c'œidisquss tintouvens me à nolllqut quiepomatrèraitra de meps fefr ll'ers'œusue suont de d ventistétapamer condes
\end{quote}
Cela est déjà un peu mieux. Notez en particulier la longueur des mots qui est plus raisonnable que dans le premier extrait. Voici comment il a été créé.
\begin{enumerate}
    \item
        La première lettre est tirée au hasard dans l'alphabet. Ici ça a été un «a».
    \item
        Nous cherchons tous les «a» dans le texte de référence, nous en prenons un au hasard, et nous ajoutons au texte la lettre \emph{qui suit}. Ici ça a été un «i». 
    \item
        Nous cherchons tous les «i» dans le texte de référence, etc.
\end{enumerate}
Cela explique pourquoi dans l'extrait donné, tous les «q» sont suivis d'un «u». En effet, dans le texte de référence presque tous les «q» sont suivis d'un «u». D'ailleurs, connaissez-vous un mot en français contenant un «q» non suivit d'un «u» ? Notez aussi qu'il y a six double «l», un seul double «m» et aucun double «e». Cela s'explique assez facilement en connaissant le français.

\begin{remark}
Dans le texte de référence, il y a des «q» non suivis de «u» dans les mots «piqûre», «coq», «cinq» (il est alors suivit d'un espace). La chaîne «qu» arrive 13528 fois dans le texte de référence et «q» suivit d'autre chose que «u» arrive seulement 24 fois.
\end{remark}

Troisième extrait :
\begin{quote}
Epgues vu un peut en m'avaisansfortes pour le dans que tout, cands ces cela comptableure amours dantestre ver aurais avaites, dont son de pours le simultés des planter, paysalutant évidue leux qu'ailles touffirer, ajour même un combianchez lui on de cholont décrir. Commette était même fortueux et de paru avait que jours pitait nulleurir cette le ce montions, nouvaien plaissé que sespèce souvoir connemi les gens ou resse solais ans mant ent, il du n'y a rançait au se dois « Alpe trientaient de Guer
\end{quote}
De loin, cela ressemble presque à s'y méprendre à du français, mais de près, on remarque que presque aucun mot n'est correct bien que tous les mots soient prononçables. Ce dernier extrait fut composé de la façon suivante.

\begin{enumerate}
    \item
        Choisir 3 lettres au hasard. Ici «epg» 
    \item
        Chercher tous les «epg» dans le texte de référence, et ajouter à l'extrait la lettre suivante. Ici c'est un «u» qui est ajouté.
    \item
        Chercher tous les «pgu» etc.
\end{enumerate}

Nous allons tenter de récrire un programme qui donne cet effet.


Un dernier pour la route. Exactement le même programme, mais en prenant un roman de Sherlock Holmes (en anglais) comme texte de référence.
\begin{quote}
dèWatseculiance is marked, at taken the unlikely siden would he placed man why Who becall wife you be othe for For to that the Amering raised. Thing his feely. "'Thand she sodes get wond infety. I said who which show will details. In see, and the Alic slansper, for stonvicturnia, and Lest but, 1892 "Shile, Petel. Then, and to man it und in my chan aframa. My litter gretaring me entagementyfound gent that, 1892 "Well days dramongroofs when some the looks upon pa weeks a reason a pipe of Penting wif
\end{quote}
Cela ressemble à de l'anglais sans aucun doute.

Nous allons construire pas à pas un programme qui génère des textes au hasard.


%--------------------------------------------------------------------------------------------------------------------------- 
\section{La boucle \info{for}}
%---------------------------------------------------------------------------------------------------------------------------
\label{subSecZNoLakM}

Il est possible de répéter une action pour tous les éléments d'une liste. Par exemple

\lstinputlisting{ex_for1.py}

La première boucle écrit \info{x} et son carré pour tout \info{x} dans la liste \info{[1,5,10,2]}. La seconde boucle écrit tous les lettres du mot «bonjour» et la troisième tous les nombres dans \info{range(0,5)}, c'est à dire \( 0\), \( 1\), \( 2\), \( 3\) et \( 4\).

\lstinputlisting[title=Résultat]{res_ex_for1.txt}

\Exo{Premiere-0048}

%--------------------------------------------------------------------------------------------------------------------------- 
\section{Prendre des choses au hasard}
%---------------------------------------------------------------------------------------------------------------------------
\label{subSecHWnLVlpe}

Python permet de tirer des nombres au hasard ou de prendre un élément au hasard dans une liste ou dans un texte. Pour cela il y a le module \info{random}. Si \info{A} est une liste ou un texte (chaîne de caractère), alors
\begin{quote}
    \info{random.choice(A)}
\end{quote}
retourne un élément au hasard de la suite.


\lstinputlisting{ex_random1.py}

Ce programme doit vous afficher une lettre prise au hasard dans le texte, y compris de temps en temps des espaces ou de la ponctuation. Essayez-le quelque fois.

Bien entendu, il est pénible de choisir \( 50\) lettres au hasard une par une. Testez le programme suivant.

\lstinputlisting{ex_random2.py}

\Exo{Premiere-0049}
\Exo{Premiere-0050}


%--------------------------------------------------------------------------------------------------------------------------- 
\section{Prendre des lettres au hasard}
%---------------------------------------------------------------------------------------------------------------------------

Pour les deux exercices suivants, vous pouvez aussi vous inspirer du programme \info{ex\_mise\_fonction1.py} donné plus bas.
\Exo{Premiere-0053}

Nous voudrions maintenant écrire un programme qui extrait tous les couples de lettres commençant disons par \info{s}. Inspirez-vous du programme suivant.
\lstinputlisting{ex_re1.py}

Tapez ce programme et testez-le. Pour rappel, toutes les lignes \info{import} doivent se trouver au début de votre fichier.

\Exo{Premiere-0072}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
\section{Prendre des couples de lettres au hasard}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Nous devons maintenant mettre le programme créé tout en une fonction. Nous voulons créer une fonction qui :
\begin{enumerate}
    \item
        cherche dans la variable \info{texte\_reference} tous les couples de lettres commençant par \info{s},
    \item
        tire un des couples au hasard et le retourne.
\end{enumerate}
Pour ce faire, il faut reprendre le programme \info{ex\_re1.py} et mettre la ligne \info{resultats= \ldots} dans une fonction. Cette fonction prendra également un élément au hasard dans la liste \info{resultats} et le retournera.

Les lignes clefs qui doivent être dans la fonction sont 
\lstinputlisting{ex_mise_fonction1.py}

Testez cette fonction quelque fois. Assurez vous que votre variable \info{texte\_reference} contienne un texte assez long pour avoir de la variété.


La fonction que nous avons maintenant est une fonction qui regarde tous les \info{s} du texte de référence et retourne un coupe \info{s.} trouvé.

Pour avancer dans le projet de texte qui ressemble à du français, nous devons un peu modifier cette fonction pour que
\begin{enumerate}
    \item
        elle soit capable de chercher pas seulement les «s» suivit de quelque chose,
    \item
        elle ne retourne pas le couple trouvé, mais seulement la seconde lettre du couple.
\end{enumerate}

Vous devriez avoir maintenant à peu près ça.

\lstinputlisting{ex_mise_fonction2.py}

Les points à noter sont que la fonction \info{lettre\_suivante} prend en argument la lettre \info{k} qu'il faut chercher. L'expression à chercher devient donc \info{k+"."}, c'est à dire la lettre \info{k} (quelle qu'elle soit) suivie de quelque chose. Ensuite la fonction retourne \info{a[-1]}, c'est à dire la dernière lettre de \info{a}.


\chapter{Applications plus ou moins utiles et plus ou moins ludiques}


%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Algorithmique plus pure}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

\Exo{Premiere-0027}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Suite définie par récurrence}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Soit une suite définie par récurrence

\begin{subequations}
    \begin{numcases}{}
    u_0=10\\
    u_{n+1}=2u_n.
    \end{numcases}
\end{subequations}

Nous voudrions pouvoir répondre à plusieurs types de questions :
\begin{enumerate}
    \item
        construire une liste contenant les \( 100\) premiers termes de la suite;
    \item
        savoir quel est le premier terme à dépasser un million.
    \item
        Quelle est l'allure générale de la suite ? Croissante ? Décroissante ?
\end{enumerate}

Avant de se lancer, nous devons nous poser une question de vocabulaire : est-ce que le centième terme de la suite \( u\) est \( u_{100}\) ou \( u_{99}\) ? Le premier terme étant \( u_0\), le centième est bien \( u_{99}\).


\Exo{Premiere-0056}

\lstinputlisting{recurrence1.py}

donne

\lstinputlisting{res_recurrence1.txt}

Notons que la ligne \info{print(u[100])} plante avec l'erreur \info{list index out of range}, c'est à dire que la liste \info{u} n'a pas d'élément \info{u[100]}, ce qui est normal parce qu'elle contient \( 100\) éléments et que la numérotation commence à zéro.


\Exo{Premiere-0039}


    En pratique, sachez que pour savoir le plus grand élément d'une liste, python dispose de la fonction \info{max}. Pour la suite, utilisez cette dernière, et non cette que vous aurez programmé dans cet exercice.


\Exo{Premiere-0057}

En ce qui concerne la possibilité de trouver le premier élément qui dépasse le million, le programme suivant donne une manière d'aborder le problème.

\lstinputlisting{recurrence2.py}

donne

\lstinputlisting{res_recurrence2.txt}

\Exo{Premiere-0058}

\begin{remark}
    
    Le code donné dans le programme \info{recurrence2.py} (cf. plus haut) donne \( 17\) et celui de l'exercice \ref{exoPremiere-0058} donne donne \( 18\). Qui a raison ? Le \( 18\) de la seconde méthode est la longueur de la liste construite, donc il indique que le premier terme à passer le million est \( u_{17}\) (vu que le premier terme est \( u_0\), la longueur est toujours un plus grande que le numéro du dernier élément).

La réponse est donc que \( u_{17}\) est le premier élément à être plus grand que un million, mais \( u_{17}\) est le dix-huitième élément de la liste.

\end{remark}

\Exo{Premiere-0055}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Moyenne, médiane, quartiles}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\label{SecZYftar}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Moyenne}
%---------------------------------------------------------------------------------------------------------------------------

\begin{example}     \label{ExerfDMnv}
    % Note : la liste ci-dessous est codée en dur dans les scripts d'exemples. Si on la modifie, il faut modifier les scripts.
    Un magasin de chaussures a vendu des tailles entre \( 40\) et \( 45\) suivant la distribution suivante :
    \begin{center}
        \begin{tabular}{|l||c|c|c|c|c|c|}
            \hline
            taille \( x_i\)&40&41&42&43&44&45\\
            \hline
            effectifs \( n_i\)&3&5&10&8&2&4\\
            \hline
        \end{tabular}
    \end{center}
    Nous voudrions calculer la moyenne, la médiane et les quartiles de la distribution des tailles de chaussures. Nous allons nous occuper de cela dans les pages qui viennent.
\end{example}
    
    Pour calculer la moyenne d'une liste, nous devons savoir la longueur et la somme de ses éléments. Python fournit cela assez rapidement. Si \info{A} est une liste,
    \begin{enumerate}
        \item
            \info{len(A)} est la longueur de \info{A},
        \item
            \info{sum(A)} est la somme de ses éléments.
    \end{enumerate}
    
\Exo{Premiere-0035}
%---------------------------------------------------------------------------------------------------------------------------
\subsection{Premier et troisième quartiles}
%---------------------------------------------------------------------------------------------------------------------------

Pour les quartiles, nous nous rappelons que si \( n\) est le nombre de valeurs, alors le rang du premier quartile est le premier entier supérieur à \( n/4\); et le rang du troisième quartile est le premier entier supérieur à \( 3n/4\). Par exemple si il y a \( 15\) données, nous calculons \( 3\times 15/3= 11.25\), et le troisième quartile sera la douzième valeur.


Bien entendu python possède une commande qui retourne le premier entier supérieur à un nombre donné. C'est la commande \info{ceil} du module \info{math}. En pratique :

\lstinputlisting{exemple_ceil.py}

donne 

\lstinputlisting{res_exemple_ceil.txt}
De même la fonction \info{math.floor} retourne le premier entier inférieur à un nombre donné. Par exemple \info{math.floor(3.89)} vaut \( 3\).

La ligne \info{import math} s'appelle «importer le module math», et nous n'en dirons sans doute pas plus sur la notion d'import de module. Le module \info{math} contient encore de nombreuses fonctions mathématiques qui transforment python en une très puissante\footnote{Pour donner une idée, la mémoire disponible sur des calculatrices modernes est à peu près la même que celle qui était disponible sur Apple II au début des années 1980; avec python vous pouvez exploiter toute la mémoire de votre ordinateur, ou de votre téléphone ou de votre tablette ou de quoi que ce soit sur lequel vous avez python.} calculatrice scientifique.


\Exo{Premiere-0036}

\Exo{Premiere-0038}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Simuler un schéma de Bernoulli}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\label{SecSimulBernrfNskC}

Dans cette section, nous voulons créer un programme qui simule mille expériences de Bernoulli et en donne le nombre de succès. Lorsque cela sera fait, nous verrons comment faire mille fois le tout et étudier la distribution du nombre de succès.

Il existe de nombreuses manières de créer un nombre aléatoire qui vaut \( 0\) ou \( 1\) avec probabilité \( p\). Dans le programme suivant nous définissons une fonction qui
\begin{enumerate}
\item
choisit un nombre \info{x} au hasard entre \( 0\) et \( 1\),
\item
retourne \( 1\) si \( \info{x}\) est plus petit que \info{0.8},
\item
    retourne \( 0\) sinon.
\end{enumerate}
Ensuite le programme donne à la variable \info{a} la valeur de la fonction et l'affiche. Vous avez \( 8\) chances sur \( 10\) que le programme écrive \( 1\).

\lstinputlisting{ex_bernoulli1.py}

\Exo{Premiere-0079}
\Exo{Premiere-0080}

Nous voulons aller encore plus loin. Au lieu d'afficher les résultats, nous voulons les enregistrer dans une liste.
\begin{enumerate}
    \item
        Avant la ligne \info{for i in }, créer une liste vide en ajoutant la ligne
        \begin{quote}
            \info{liste\_resultats=[]}
        \end{quote}
    \item
        À l'intérieur de la boucle, au lieu (ou en plus) de la ligne \info{print(a)}, mettre la ligne
        \begin{quote}
            \info{liste\_resultats.append(a)}
        \end{quote}
        Nous comprenons aisément la signification de cette signe, sachant que «append» signifie «ajouter» en anglais.
    \item
        Enfin, en bout de programme, en dehors de la boucle \info{for}, afficher la liste en ajoutant
        \begin{quote}
            \info{print(liste\_resultats)}
        \end{quote}
\end{enumerate}
Maintenant le programme devrait afficher une centaine de zéros et de uns. C'est une bonne étape. 

Pour savoir le nombre de succès, il faut calculer la somme de tous les éléments de la liste. Ajouter les lignes
\begin{verbatim}
succes=sum(liste_resultats)
print(succes)
\end{verbatim}

\Exo{Premiere-0081}

Nous allons maintenant encore complexifier un peu le programme. Le but sera de refaire mille fois les \( 100\) épreuves de Bernoulli et enregistrer le nombre de résultats.
\begin{enumerate}
    \item
        Mettre toute la partie du programme remplissant la liste \info{liste\_resultats} dans une fonction retournant la somme de la liste. Nommer \info{schema} cette fonction.
    \item
        Si vous êtes à l'aise, faite que cette fonction prenne en argument \info{p} et \info{n} où \info{n} est le nombre d'épreuves de Bernoulli à effectuer dans un schéma.
    \item
        Créer une boucle \info{for} qui répète mille fois la fonction \info{schema} en enregistrant les résultats dans une nouvelle liste que nous nommerons \info{liste\_succes}.
    \item
        Afficher la liste.
\end{enumerate}
Tout cela devrait vous donner une liste de \( 1000\) nombres, chacun étant entre \( 0\) et \( 100\).

Nous voudrions surtout savoir combien de fois arrive chaque nombre entre zéro et cent. Si vous avez gardé la probabilité \( 0.8\), vous vous attendez à ce que le \( 80\) soit la valeur la plus représentée. Vous vous attendez aussi à ce que le \( 3\) par exemple serait presque jamais représenté parce qu'il correspondrait à une série d'expérience durant laquelle nous aurions obtenu que trois fois sur \( 100\) un résultat qui est censé arriver \( 8\) fois sur \( 10\).

Cette partie est relativement compliquée, alors nous donnons la solution. Ajoutez à votre programme la fonction suivante :

\lstinputlisting{ex_bernoulli3.py}

Cette fonction prend en argument une liste et retourne une liste comptant combien de fois arrive chaque élément. C'est à dire que le premier élément de la liste retournée est le nombre de fois qu'arrive le nombre \( 0\) dans la liste donnée; le vingtième élément de la liste retournée est le nombre de fois que le \( 19\) arrive dans la liste donnée.

Votre programme devrait maintenant terminer par
\begin{verbatim}
frequences=compte_frequence(liste\_succes)
print(frequences)
\end{verbatim}

L'exécution devrait donner quelque chose du type
\begin{quote}
\{0: 0, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0, 9: 0, 10: 0, 11: 0, 12: 0, 13: 0, 14: 0, 15: 0, 16: 0, 17: 0, 18: 0, 19: 0, 20: 0, 21: 0, 22: 0, 23: 0, 24: 0, 25: 0, 26: 0, 27: 0, 28: 0, 29: 0, 30: 0, 31: 0, 32: 0, 33: 0, 34: 0, 35: 0, 36: 0, 37: 0, 38: 0, 39: 0, 40: 0, 41: 0, 42: 0, 43: 0, 44: 0, 45: 0, 46: 0, 47: 0, 48: 0, 49: 0, 50: 0, 51: 0, 52: 0, 53: 0, 54: 0, 55: 0, 56: 0, 57: 0, 58: 0, 59: 0, 60: 0, 61: 0, 62: 0, 63: 0, 64: 1, 65: 1, 66: 4, 67: 8, 68: 18, 69: 17, 70: 63, 71: 80, 72: 154, 73: 191, 74: 309, 75: 444, 76: 581, 77: 746, 78: 855, 79: 986, 80: 973, 81: 989, 82: 877, 83: 801, 84: 633, 85: 442, 86: 349, 87: 223, 88: 140, 89: 53, 90: 33, 91: 17, 92: 7, 93: 2, 94: 1, 95: 0, 96: 1, 97: 0, 98: 0, 99: 0, 100: 0\}
\end{quote}
Cela est un «dictionnaire» qui donne pour chaque nombre \( x\) entre \( 0\) et \( 100\) donne le nombre de fois, qu'en $10000$ simulations, on a obtenu \( x\) réussites. 

Et enfin, nous voudrions dessiner un graphique en barre de cette liste. Il est bien entendu possible de créer un bel histogramme en python, comme \href{http://matplotlib.org/users/screenshots.html}{montré ici}. Cependant, juste pour dire qu'on utilise un tableur, et pour montrer une fonctionnalité trop peu connue dudit tableur, nous allons créer l'histogramme avec un tableur.

Notre objectif est de créer, en python, un fichier qui, lu par le tableur, donne une colonne contenant les nombres de la liste \info{frequence}. Pour cela il faut savoir que les tableurs peuvent lire des fichiers dits \emph{csv} (Comma Separated Variables). Un tel fichier est simplement un fichier contenant les valeurs à mettre dans le tableur séparées par une virgule. Un saut de ligne dans le fichier correspond à une nouvelle ligne dans le tableur.

Écrivez par exemple ces deux lignes dans un nouveau fichier.
\begin{quote}
    a,b,c\\
    d,e,f
\end{quote}
Enregistrez ce fichier sous le nom \info{fichier.csv}. Ouvrez-le maintenant dans \wikipedia{fr}{Libreoffice}{votre tableur préféré}.

Ajoutez maintenant la fonction suivante à votre beau programme :

\lstinputlisting{ex_bernoulli4.py}

Cette fonction prend en argument une liste \info{A} et un nom \info{nom\_de\_fichier} et crée un fichier tout prêt à être lu par votre tableur. 

Terminez alors votre programme par la ligne
\begin{quote}
    \info{sauvegarde(frequences,``mon\_fichier'')}
\end{quote}
L'exécution de votre programme crée maintenant le fichier \info{mon\_fichier.csv} qu'il vous suffit d'ouvrir avec LibreOffice.



