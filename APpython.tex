% This is part of Un soupçon de mathématique sans être agressif pour autant
% Copyright (c) 2012
%   Laurent Claessens
% See the file fdl-1.3.txt for copying conditions.

\chapter{Structures de base}

\begin{remark}
    Certains bouts de codes donnés ici commencent par la ligne
    \begin{quote}
        \info{\# -*- coding: utf8 -*-}
    \end{quote}
    Si vous savez ce que signifie «\wikipedia{fr}{Utf8}{utf8}», vous devriez deviner à quoi sert cette ligne. Sinon c'est pas grave : vous n'êtes pas \emph{obligés} de l'écrire dans vos programmes, mais c'est une bonne habitude à prendre. Nous en reparlerons peut-être plus tard.
\end{remark}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{La fonction \info{print}}
%---------------------------------------------------------------------------------------------------------------------------

Python ne prend pas d'initiatives. Si vous ne lui demandez pas d'écrire quelque chose, il n'écrira rien. La commande la plus courante\footnote{Bien entendu, python permet de programmer des fenêtres, des boutons et autres boites de dialogue, auquel cas ce ne sera plus la commande \info{print} qui jouera.} pour afficher quelque chose à l'écran est la commande \info{print}. 
\begin{enumerate}
    \item
        Pour afficher la valeur d'une variable \info{a}, mettre \info{print(a)}.
    \item
        Pour afficher un texte (par exemple «bonjour» ), mettre des guillemets : \info{print(``bonjour'')}.
\end{enumerate}
Si vous voulez afficher plusieurs choses, vous les séparez par une virgule.

\lstinputlisting{ex_print.py}

donne

\lstinputlisting[title=Résultat]{res_ex_print.txt}

Notez que les lignes qui commencent par \# ne sont pas prises en compte. Cela permet au programmeur de mettre des notes pour lui-même. N'hésitez pas à en mettre pour rendre votre code plus lisible.

\Exo{Premiere-0037}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Listes}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Une liste est une collection ordonnée d'éléments. Elle se définit avec des crochets.

\lstinputlisting{ex_listes.py}

donne

\lstinputlisting[title=Résultat]{res_ex_listes.txt}

Nous pouvons ajouter un élément à une liste en utilisant la \emph{méthode} \info{append}, et retrouver un élément d'une liste par son numéro (attention : python numérote à partie de zéro), en demandant par exemple \info{A[4]} pour l'élément numéro \( 4\) de la liste \info{A}. Cela sera donc le cinquième élément de la liste. Cas spécial : le dernier élément de la liste est le numéro \( -1\).

\lstinputlisting{ex_listes2.py}

donne

\lstinputlisting[title=Résultat]{res_ex_listes2.txt}


\Exo{Premiere-0033}


La multiplication d'une liste par un nombre donne la liste contenant plusieurs fois la liste originale. Nous ajoutons une liste à une autre en utilisant la méthode \info{extend}.


\lstinputlisting{ex_listes3.py}

donne

\lstinputlisting[title=Résultat]{res_ex_listes3.txt}


\Exo{Premiere-0034}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Quelque mots à propos des fonctions}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Choses Basiques}
%---------------------------------------------------------------------------------------------------------------------------

Si un calcul doit être refait plusieurs fois dans un même programme, il est bon d'écrire une fonction qui sera appelée à chaque fois. En python, une fonction se déclare avec le mot-clef \info{def} comme ceci :
\begin{quote}
    \info{def\ nom\_de\_ma\_fonction(a,b):}
\end{quote}
où \info{a} et \info{b} seront les arguments de la fonction. Il peut y en avoir un seul, deux, ou plus (pas de limites), ou pas du tout. Une fonction peut afficher et calculer autant de résultats intermédiaires que l'on veut. 

\lstinputlisting{ex_fonction.py}

donne

\lstinputlisting[title=Résultat]{res_ex_fonction.txt}

Cette fonction ne fait qu'afficher du texte, mais ne retourne pas de valeurs. Voici une fonction qui retourne \( 1\) si le nombre donné est plus grand ou égal à zéro et retourne \( -1\) si il est négatif.


\lstinputlisting{ex_fonction2.py}

donne

\lstinputlisting[title=Résultat]{res_ex_fonction2.txt}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Pour aller plus loin}
%---------------------------------------------------------------------------------------------------------------------------

La fonction de l'exemple précédent peut être simplifiée en sachant que dès que une instruction \info{return} est rencontrée, l'exécution de la fonction est \emph{immédiatement} stoppée et la valeur est retournée. Nous pouvons donc écrire

\lstinputlisting{ex_fonction3.py}

Si le nombre donné est positif, un \info{return} est rencontré à l'intérieur du \info{if}, et l'autre \info{return} n'est jamais rencontré.

D'autre part, une fonction peut vraiment prendre \emph{n'importe quoi} comme argument, y compris des autres fonctions. Dans l'exemple suivant, la fonction \info{evaluation} prend un argument une fonction et un nombre, et retourne la fonction évaluée en ce nombre.

\lstinputlisting{ex_fonction4.py}

donne

\lstinputlisting[title=Résultat]{res_ex_fonction4.txt}


%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Moyenne, médiane, quartiles}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\label{SecZYftar}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Moyenne}
%---------------------------------------------------------------------------------------------------------------------------

\begin{example}     \label{ExerfDMnv}
    % Note : la liste ci-dessous est codée en dur dans les scripts d'exemples. Si on la modifie, il faut modifier les scripts.
    Un magasin de chaussures a vendu des tailles entre \( 40\) et \( 45\) suivant la distribution suivante :
    \begin{center}
        \begin{tabular}{|l||c|c|c|c|c|c|}
            \hline
            taille \( x_i\)&40&41&42&43&44&45\\
            \hline
            effectifs \( n_i\)&3&5&10&8&2&4\\
            \hline
        \end{tabular}
    \end{center}
    Nous voudrions calculer la moyenne, la médiane et les quartiles de la distribution des tailles de chaussures. Nous allons nous occuper de cela dans les pages qui viennent.
\end{example}
    
    Pour calculer la moyenne d'une liste, nous devons savoir la longueur et la somme de ses éléments. Python fournit cela assez rapidement. Si \info{A} est une liste,
    \begin{enumerate}
        \item
            \info{len(A)} est la longueur de \info{A},
        \item
            \info{sum(A)} est la somme de ses éléments.
    \end{enumerate}
    
\Exo{Premiere-0035}
    
Le programme suivant écrit la moyenne de la liste des tailles de chaussures de l'exemple \ref{exnXIMeL}.

\lstinputlisting{chaussures.py}

%\lstinputlisting{res_chaussures.txt}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Premier et troisième quartiles}
%---------------------------------------------------------------------------------------------------------------------------

Pour les quartiles, nous nous rappelons que si \( n\) est le nombre de valeurs, alors le rang du premier quartile est le premier entier supérieur à \( n/4\); et le rang du troisième quartile est le premier entier supérieur à \( 3n/4\). Par exemple si il y a \( 15\) données, nous calculons \( 3\times 15/3= 11.25\), et le troisième quartile sera la douzième valeur.


Bien entendu python possède une commande qui retourne le premier entier supérieur à un nombre donné. C'est la commande \info{ceil} du module \info{math}. En pratique :

\lstinputlisting{exemple_ceil.py}

donne 

\lstinputlisting{res_exemple_ceil.txt}
De même la fonction \info{math.floor} retourne le premier entier inférieur à un nombre donné. Par exemple \info{math.floor(3.89)} vaut \( 3\).

La ligne \info{import math} s'appelle «importer le module math», et nous n'en dirons sans doute pas plus sur la notion d'import de module. Le module \info{math} contient encore de nombreuses fonctions mathématiques qui transforment python en une très puissante\footnote{Pour donner une idée, la mémoire disponible sur des calculatrices modernes est à peu près la même que celle qui était disponible sur Apple II au début des années 1980; avec python vous pouvez exploiter toute la mémoire de votre ordinateur, ou de votre téléphone ou de votre tablette ou de quoi que ce soit sur lequel vous avez python.} calculatrice scientifique.


\Exo{Premiere-0036}

\lstinputlisting{premier_quartile.py}

Et voici pour la médiane :

\lstinputlisting{mediane.py}


\Exo{Premiere-0038}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Suite définie par récurrence} 
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Soit une suite définie par récurrence

\begin{subequations}
    \begin{numcases}{}
    u_0=10\\
    u_{n+1}=2u_n.
    \end{numcases}
\end{subequations}

Nous voudrions pouvoir répondre à deux types de questions :
\begin{enumerate}
    \item
        construire une liste contenant les \( 100\) premiers termes de la suite;
    \item
        savoir quel est le premier terme à dépasser un million.
\end{enumerate}

Avant de se lancer, nous devons nous poser une question de vocabulaire : est-ce que le centième terme de la suite \( u\) est \( u_{100}\) ou \( u_{99}\) ? Le premier terme étant \( u_0\), le centième est bien \( u_{99}\).

\lstinputlisting{recurrence1.py}

donne

\lstinputlisting{res_recurrence1.txt}

Notons que la ligne \info{print(u[100])} plante avec l'erreur \info{list index out of range}, c'est à dire que la liste \info{u} n'a pas d'élément \info{u[100]}, ce qui est normal parce qu'elle contient \( 100\) éléments et que la numérotation commence à zéro.


\Exo{Premiere-0039}


En ce qui concerne la possibilité de trouver le premier élément qui dépasse le million, le programme suivant donne deux méthodes.

\lstinputlisting{recurrence2.py}

donne

\lstinputlisting{res_recurrence2.txt}

Notons que la première méthode donne \( 17\) et la seconde donne \( 18\). Qui a raison ? Le \( 18\) de la seconde méthode est la longueur de la liste construite, donc il indique que le premier terme à passer le million est \( u_{17}\) (vu que le premier terme est \( u_0\), la longueur est toujours un plus grande que le numéro du dernier élément).

La réponse est donc que \( u_{17}\) est le premier élément à être plus grand que un million, mais \( u_{17}\) est le dix-huitième élément de la liste.


%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Exercices}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++


\Exo{Premiere-0027}

